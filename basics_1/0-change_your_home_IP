#!/usr/bin/env bash
# 0-change_your_home_IP
# Configure localhost and facebook.com resolutions

HOSTS_FILE="/etc/hosts"
TMP_FILE="/tmp/hosts.tmp"

# Backup original hosts file (optional, for safety)
cp "$HOSTS_FILE" /etc/hosts.bak 2>/dev/null

# 1. Read current /etc/hosts and write modified version to TMP_FILE

# Remove the existing localhost line (127.0.0.1 localhost) if present
grep -vE '^127\.0\.0\.1[[:space:]]+localhost' "$HOSTS_FILE" > "$TMP_FILE"

# Add our desired localhost mapping
echo "127.0.0.2 localhost" >> "$TMP_FILE"

# Remove any existing facebook.com line
grep -v 'facebook.com' "$TMP_FILE" > "${TMP_FILE}.2"

# Add our desired facebook.com mapping
echo "8.8.8.8 facebook.com" >> "${TMP_FILE}.2"

# Overwrite /etc/hosts with the modified file
mv "${TMP_FILE}.2" "$HOSTS_FILE"
